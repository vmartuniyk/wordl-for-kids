var i=Object.defineProperty;var n=(e,t,s)=>t in e?i(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s;var r=(e,t,s)=>(n(e,typeof t!="symbol"?t+"":t,s),s);class l{constructor(){r(this,"letter","");r(this,"status","")}updateStatus(t,s){this.status=s.includes(this.letter)?"present":"absent",t.indexOf(this.letter)===s.indexOf(this.letter)&&(this.status="correct")}fill(t){this.letter=t.toLowerCase()}empty(){this.letter=""}}const u={guessesAllow:3,theWord:"cat",currentRowIndex:0,message:"",state:"active",get remainingGueses(){return this.guessesAllow-this.currentRowIndex-1},get currentRow(){return this.board[this.currentRowIndex]},get currentGuess(){return this.currentRow.map(e=>e.letter).join("")},init(){this.board=Array.from({length:this.guessesAllow},()=>Array.from({length:this.theWord.length},()=>new l))},onKeyPress(e){this.message="",/^[A-z]$/.test(e)?this.fillTile(e):e==="Backspace"?this.emptyTile():e==="Enter"&&this.submitGuess()},fillTile(e){for(let t of this.currentRow)if(!t.letter){t.fill(e);break}},emptyTile(){for(let e of[...this.currentRow].reverse())if(e.letter){e.empty();break}},submitGuess(){if(!(this.currentGuess.length<this.theWord.length)){for(let e of this.currentRow)e.updateStatus(this.currentGuess,this.theWord);return this.currentGuess===this.theWord?(this.state="complete",this.message="You win!"):this.remainingGueses===0?(this.state="complete",this.message="Game over. You lose"):(this.currentRowIndex++,this.message="Incorrect")}}};document.addEventListener("alpine:init",()=>{Alpine.data("game",()=>u)});
